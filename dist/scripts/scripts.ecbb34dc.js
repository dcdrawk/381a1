"use strict";function parseQuery(a){var b={},c=a.split("&");for(var d in c){var e=c[d].split("=");b[decodeURIComponent(e[0])]=decodeURIComponent(e[1])}return b}function initializeModel(a){var b=a.createString("Hello Realtime World!"),c=a.createMap();a.getRoot().set("text",b),a.getRoot().set("map",c)}function onFileLoaded(a){function b(a){console.log(a);for(var b=a.events,d=a.events.length,e=0;d>e;e++)console.log("Event type: "+b[e].type),console.log("Local event: "+b[e].isLocal),console.log("User ID: "+b[e].userId),console.log("Session ID: "+b[e].sessionId);testMap=g.get("mylist"),mapKeys=g.keys(),console.log(g.keys());var f=c(mapKeys);quests.innerHTML=f}function c(a){var b="";console.log(a);for(var c=0;c<a.length;c++){var d=a[c];document.getElementById("questLog");var e=g.get(a[c]);e.complete?(console.log(d+" is complete"),b+='<div class="questContainer"><div class="questDetail complete">'):b+='<div class="questContainer"><div class="questDetail">',console.log(e),b+="<p><strong>"+d+"</strong></p>",b+="<p>"+e.description+"</p></div>",b+='<div class="questControls"><p value="'+d+'" class="completeQuest">COMPLETE</p> <p value="'+d+'" class="removeQuest">REMOVE</p></div></div>'}return b}function d(a){g["delete"](a)}function e(a){var b=g.get(a),c=b.id,d=b.description;console.log(a);var e={id:c,description:d,complete:!0};g.set(a,e)}{var f=a.getModel().getRoot().get("text"),g=a.getModel().getRoot().get("map"),h=document.getElementById("notes");document.getElementById("binding")}gapi.drive.realtime.databinding.bindString(f,h),h.disabled=!1;var i=(a.getModel(),document.getElementById("enableShare")),j=document.getElementById("disableShare"),k=document.getElementById("addQuest"),l=document.getElementById("questName"),m=document.getElementById("questDetails"),n=document.getElementById("clearQuests"),o=document.getElementById("newQuest"),p=document.getElementById("questForm"),q=(document.getElementById("shortURL"),document.getElementById("togNotes")),r=document.getElementById("togQuests"),s=document.getElementById("questLogContainer"),t=rtclient.params.fileIds;i.onclick=function(){rtclient.changePermissions(t,null,"anyone","writer")},j.onclick=function(){rtclient.changePermissions(t,null,"anyone","reader")},q.onclick=function(){""==h.style.display?(h.style.display="none",q.innerHTML="Show"):"block"==h.style.display?(h.style.display="none",q.innerHTML="Show"):"none"==h.style.display&&(h.style.display="block",q.innerHTML="Hide")},r.onclick=function(){""==s.style.display?(s.style.display="none",r.innerHTML="Show"):"block"==s.style.display?(s.style.display="none",r.innerHTML="Show"):"none"==s.style.display&&(s.style.display="block",r.innerHTML="Hide")},k.onclick=function(){mapKeys=g.keys(),console.log(mapKeys);var a={id:mapKeys.length,description:m.value,complete:!1};g.set(l.value,a),console.log("Add Quest "+l.value),m.value="",l.value="",k.disabled=!0,o.style.display="block",p.style.display="none"},n.onclick=function(){g.clear()},o.onclick=function(){p.style.display="block",o.style.display="none"},l.oninput=function(){k.disabled=""==l.value||""==m.value?!0:!1},m.oninput=function(){k.disabled=""==l.value||""==m.value?!0:!1};document.getElementById("questLog");a.getModel().getRoot().addEventListener(gapi.drive.realtime.EventType.OBJECT_CHANGED,b),document.onclick=function(a){"removeQuest"===a.target.className?(console.log("REMOVE!"),d(a.target.attributes[0].value)):"completeQuest"===a.target.className?(console.log("COMPLETE!"),e(a.target.attributes[0].value)):"copyURL"===a.target.className&&(SelectText("shortURL"),console.log("Link Copied!"))},mapKeys=g.keys();var u=c(mapKeys);quests.innerHTML=u}function startRealtime(){var a=new rtclient.RealtimeLoader(realtimeOptions);a.start()}function SelectText(a){var b,c,d=document,e=d.getElementById(a);d.body.createTextRange?(b=document.body.createTextRange(),b.moveToElementText(e),b.select()):window.getSelection&&(c=window.getSelection(),b=document.createRange(),b.selectNodeContents(e),c.removeAllRanges(),c.addRange(b))}function onFileLoaded(a){function b(a){1!=a.isLocal&&(console.log("gameChange",a),APP.updateGame())}function c(a){a.isLocal||(console.log("tilesChange",a),APP.updateTiles())}function d(a){a.isLocal||(console.log("chatChange",a),APP.updateChat())}APP.game=a.getModel().getRoot().get("game"),APP.tiles=a.getModel().getRoot().get("tiles"),APP.chat=a.getModel().getRoot().get("chat"),APP.game.addEventListener(gapi.drive.realtime.EventType.VALUE_CHANGED,b),APP.tiles.addEventListener(gapi.drive.realtime.EventType.VALUES_SET,c),APP.chat.addEventListener(gapi.drive.realtime.EventType.VALUES_ADDED,d),console.log(APP),APP.updateGame(),APP.updateTiles(),APP.gameReady()}function initializeModel(a){console.log("model initialized");var b=a.createMap({turn:"x"}),c=a.createList([0,0,0,0,0,0,0,0,0]),d=a.createList();a.getRoot().set("game",b),a.getRoot().set("tiles",c),a.getRoot().set("chat",d)}var app={};app.module=angular.module("myappApp",["ngAnimate","ngCookies","ngMessages","ngRoute","ngSanitize","ngTouch","ngMaterial","ngMdIcons","ngCookies","duScroll"]).config(["$mdThemingProvider",function(a){a.theme("default").primaryPalette("blue-grey",{"default":"700","hue-1":"100","hue-2":"200","hue-3":"A100"}).accentPalette("amber",{"default":"400"}).warnPalette("red",{"default":"600"})}]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/character-details",{templateUrl:"views/character-details.html",controller:"DetailsCtrl"}).when("/proficiency",{templateUrl:"views/proficiency.html#profTitle",controller:"ProfCtrl"}).when("/ability-scores",{templateUrl:"views/ability-scores.html",controller:"AScoreCtrl"}).when("/to-do",{templateUrl:"views/to-do.html",controller:"ToDoCtrl"}).when("/character-summary",{templateUrl:"views/character-summary.html",controller:"SummaryCtrl"}).when("/party",{templateUrl:"views/party.html",controller:"PartyCtrl"}).when("/party/:fileId/",{templateUrl:"views/party.html",controller:"PartyCtrl"}).otherwise({redirectTo:"/"})}]).controller("TestCtrl",["$scope",function(a){a.title1="Button",a.title4="Warn",a.isDisabled=!0,a.googleUrl="http://google.com"}]).controller("AppCtrl",["$scope","$timeout","$mdSidenav","$log","$location",function(a,b,c,d,e){a.toggleLeft=function(){c("left").toggle().then(function(){d.debug("toggle left is done")})},a.openLeft=function(){c("left").open().then(function(){d.debug("open left is done")})},a.closeLeft=function(){c("left").close().then(function(){d.debug("close left is done")})},a.go=function(a){e.path(a),c("left").close()};var f=document.getElementById("doc-content"),g=document.getElementById("leftNav"),h=new Hammer(f),i=new Hammer(g),j=new Hammer.Pan({threshold:200}),k=new Hammer.Pan({threshold:200});h.add([j]),i.add([k]),i.on("panleft",function(){window.getSelection().removeAllRanges(),a.closeLeft()}),h.on("panright",function(){window.getSelection().removeAllRanges(),a.openLeft()})}]).controller("LeftCtrl",["$scope","$timeout","$mdSidenav","$log",function(a,b,c,d){a.close=function(){c("left").close().then(function(){d.debug("close LEFT is done")})},a.gotoTop=function(){}}]),angular.module("myappApp").controller("MainCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("myappApp").controller("DetailsCtrl",["$scope","$log","$cookies","$cookieStore","$anchorScroll","$location","$document",function(a,b,c,d){var e,f,g=d.get("charDetails"),h=d.get("personality"),i=d.get("proficiency");b.debug(i),"undefined"==typeof g&&(a.details={name:"",race:"",subrace:"","class":"",background:"",alignment:"",experience:"",level:""},d.put("charDetails",a.details),g=d.get("charDetails")),"undefined"==typeof h&&(a.personality={traits:"",ideals:"",bonds:"",flaws:""},d.put("personality",a.personality),h=d.get("personality")),"undefined"==typeof i&&(a.proficiency={languages:""},d.put("proficiency",a.proficiency),i=d.get("proficiency")),a.details={name:g.name,race:g.race,subrace:g.subrace,"class":g["class"],background:g.background,alignment:g.alignment,experience:g.experience,level:g.level},a.personality={traits:h.traits,ideals:h.ideals,bonds:h.bonds,flaws:h.flaws},a.proficiency={languages:i.languages},d.put("charDetails",a.details),g=d.get("charDetails"),b.debug(Object.keys(a.details).length);var j=a.details.race,k=a.details.subrace,l=a.details["class"],m=a.details.background,n=a.details.alignment,o=a.details.experience,p=a.details.level;for(a.customRace=!1,a.races=["Select a Race","Dwarf","Elf","Halfling","Human"],a.subraces=["None Available"],a.subracesDwarf=["Select a Subrace","Hill Dwarf","Mountain Dwarf"],a.subracesElf=["Select a Subrace","High Elf","Wood Elf"],a.subracesHalfling=["Select a Subrace","High Elf","Wood Elf"],a.characterClasses=["Select a Class","Cleric","Fighter","Rogue","Wizard"],a.backgrounds=["Select a Background","Acolyte","Criminal","Folk Hero","Noble","Sage","Soldier"],a.alignment=["Select an Alignment","Lawful Good","Lawful Neutral","Lawful Evil","Neutral Good","True Neutral","Neutral Evil","Chaotic Good","Chaotic Neutral","Chaotic Evil"],a.testarray=[{value:222,text:"1st"},{value:2,text:"2nd"}],a.selectedRace=a.details.race,a.selectedSubrace=a.subraces[0],e=0;e<a.races.length;e++)if(a.details.race!==a.races[e]&&(a.selectedRace=a.races[0]),a.details.race===a.races[e]){a.selectedRace=a.races[e];break}for(e=0;e<a.races.length;e++){if("Select a Race"===a.selectedRace&&(a.subraces=a.subraces,a.selectedSubrace=a.subraces[0]),"Dwarf"===a.selectedRace)for(a.subraces=a.subracesDwarf,f=0;f<a.subraces.length;f++)if(k===a.subraces[f]){a.selectedSubrace=a.subraces[f];break}if("Elf"===a.selectedRace)for(a.subraces=["Select a Subrace","High Elf","Wood Elf"],f=0;f<a.subraces.length;f++)if(k===a.subraces[f]){a.selectedSubrace=a.subraces[f];break}if("Halfling"===a.selectedRace)for(a.subraces=["Select a Subrace","Lightfoot","Stout"],f=0;f<a.subraces.length;f++)if(k===a.subraces[f]){a.selectedSubrace=a.subraces[f];break}if("Human"===a.selectedRace)for(a.subraces=["None Available"],f=0;f<a.subraces.length;f++)if(k===a.subraces[f]){a.selectedSubrace=a.subraces[f];break}if("Custom Race"===a.selectedRace)for(a.subraces=["Custom!"],f=0;f<a.subraces.length;f++)if(k===a.subraces[f]){a.selectedSubrace=a.subraces[f];break}if("Select a Race"!==j&&"Dwarf"!==j&&"Elf"!==j&&"Halfling"!==j&&"Human"!==j&&"Custom Race"!==j&&"undefined"!=typeof j&&""!==j){a.customRace=!0,a.selectedRace=j;break}}for(b.debug(a.characterLevel),e=0;e<a.characterClasses.length;e++){if(l===a.characterClasses[e]){a.details["class"]=a.characterClasses[e];break}a.details["class"]=a.characterClasses[0]}for(e=0;e<a.backgrounds.length;e++){if(m===a.backgrounds[e]){a.selectedBackground=a.backgrounds[e];break}a.selectedBackground=a.backgrounds[0]}for(e=0;e<a.alignment.length;e++){if(n===a.alignment[e]){a.selectedAlignment=a.alignment[e];break}a.selectedAlignment=a.alignment[0]}o>=0&&(a.characterExp=parseInt(o)),p>=0?(a.characterLevel=parseInt(p),a.characterLevel>=1&&a.characterLevel<=4&&(a.profBonus=2),a.characterLevel>=5&&a.characterLevel<=8&&(a.profBonus=3),a.characterLevel>=9&&a.characterLevel<=12&&(a.profBonus=4),a.characterLevel>=12&&a.characterLevel<=16&&(a.profBonus=5),a.characterLevel>=17&&(a.profBonus=6)):a.characterLevel="",("NaN"==typeof a.characterLevel||"null"==typeof a.characterLevel)&&(a.characterLevel=""),b.debug(a.characterLevel),a.setName=function(){g.name=a.details.name,d.put("charDetails",g)},a.setRace=function(){g.race=a.selectedRace,d.put("charDetails",g)},a.setSubrace=function(){g.subrace=a.selectedSubrace,d.put("charDetails",g)},a.setClass=function(){g["class"]=a.details["class"],d.put("charDetails",g),a.setProficiency()},a.setBackground=function(){g.background=a.selectedBackground,d.put("charDetails",g)},a.setAlignment=function(){g.alignment=a.selectedAlignment,d.put("charDetails",g)},a.setExp=function(){g.experience=parseInt(a.characterExp),g.level=parseInt(a.characterLevel),d.put("charDetails",g),a.characterLevel>=1&&a.characterLevel<=4&&(a.profBonus=2),a.characterLevel>=5&&a.characterLevel<=8&&(a.profBonus=3),a.characterLevel>=9&&a.characterLevel<=12&&(a.profBonus=4),a.characterLevel>=12&&a.characterLevel<=16&&(a.profBonus=5),a.characterLevel>=17&&(a.profBonus=6)},a.setLevel=function(){b.debug(a.characterLevel),g.level=a.characterLevel,d.put("charDetails",g),a.characterLevel>=1&&a.characterLevel<=4&&(a.profBonus=2),a.characterLevel>=5&&a.characterLevel<=8&&(a.profBonus=3),a.characterLevel>=9&&a.characterLevel<=12&&(a.profBonus=4),a.characterLevel>=12&&a.characterLevel<=16&&(a.profBonus=5),a.characterLevel>=17&&(a.profBonus=6),null===a.characterLevel&&(a.profBonus=0)},a.clearRace=function(){a.customRace=!1,a.selectedRace=a.races[0]},a.setLanguages=function(){b.debug("test"),i.languages=a.proficiency.languages,d.put("proficiency",i)},a.setPersonality=function(c){b.debug("typing"+c),"traits"===c&&(h.traits=a.personality.traits,d.put("personality",h)),"ideals"===c&&(h.ideals=a.personality.ideals,d.put("personality",h)),"bonds"===c&&(h.bonds=a.personality.bonds,d.put("personality",h)),"flaws"===c&&(h.flaws=a.personality.flaws,d.put("personality",h))},a.updateSubrace=function(){"Select a Race"===a.selectedRace&&(b.debug("no race selected"),a.subraces=["None available"],a.selectedSubrace=a.subraces[0]),"Dwarf"===a.selectedRace&&(b.debug("Dwarf race selected"),a.subraces=["Select a Subrace","Hill Dwarf","Mountain Dwarf"],a.selectedSubrace=a.subraces[0]),"Elf"===a.selectedRace&&(b.debug("Elf race selected"),a.subraces=["Select a Subrace","High Elf","Wood Elf"],a.selectedSubrace=a.subraces[0]),"Halfling"===a.selectedRace&&(b.debug("Halfling race selected"),a.subraces=["Select a Subrace","Lightfoot","Stout"],a.selectedSubrace=a.subraces[0]),"Human"===a.selectedRace&&(b.debug("Human race selected"),a.subraces=["None Available"],a.selectedSubrace=a.subraces[0]),"Custom Race"===a.selectedRace&&(a.subraces=["None Available"],a.selectedSubrace=a.subraces[0],a.customRace=!0,a.customSubrace=!0,a.selectedRace="")},a.calculateLevel=function(){this.characterExp>=0&&(a.characterLevel=1),this.characterExp>=300&&(a.characterLevel=2),this.characterExp>=900&&(a.characterLevel=3),this.characterExp>=2700&&(a.characterLevel=4),this.characterExp>=6500&&(a.characterLevel=5),this.characterExp>=14e3&&(a.characterLevel=6),this.characterExp>=23e3&&(a.characterLevel=7),this.characterExp>=34e3&&(a.characterLevel=8),this.characterExp>=48e3&&(a.characterLevel=9),this.characterExp>=64e3&&(a.characterLevel=10),this.characterExp>=85e3&&(a.characterLevel=11),this.characterExp>=1e5&&(a.characterLevel=12),this.characterExp>=12e4&&(a.characterLevel=13),this.characterExp>=14e4&&(a.characterLevel=14),this.characterExp>=164e3&&(a.characterLevel=15),this.characterExp>=195e3&&(a.characterLevel=16),this.characterExp>=225e3&&(a.characterLevel=17),this.characterExp>=265e3&&(a.characterLevel=18),this.characterExp>=305e3&&(a.characterLevel=19),this.characterExp>=355e3&&(a.characterLevel=20)},a.setProficiency=function(){"Select a Class"===l&&(a.armorProf="",a.weapProf="",a.toolProf="",a.savingThrows="",a.skillsProf=""),"Cleric"===a.details["class"]&&(a.armorProf="Light and medium armor, shields",a.weapProf="All simple weapons",a.toolProf="None",a.savingThrows="Wisdom, Charisma",a.skillsProf="Choose two from History, Insight, Medicine, Persuasion, and Religion"),"Fighter"===a.details["class"]&&(a.armorProf="All armor, shields",a.weapProf="Simple weapons, martial weapons",a.toolProf="None.",a.savingThrows="Strength, Constitution",a.skillsProf="Choose two from Acrobatics, Animal Handling, Athletics, History, Insight, Intimidation, Perception, and Survival"),"Rogue"===a.details["class"]&&(a.armorProf="Light Armor",a.weapProf="Simple weapons, hand crossbows, longswords, rapiers, shortswords",a.toolProf="Thieves tools",a.savingThrows="Dexterity, Intelligence",a.skillsProf="Choose four from Acrobatics, Athletics, Deception, Insight, Intimidation, Investigation, Perception, Performance, Persuasion, Sleight of Hand, and Stealth"),"Wizard"===a.details["class"]&&(a.armorProf="None",a.weapProf="Daggers, darts, slings, quarterstaffs, light crossbows.",a.toolProf="None",a.savingThrows="Intelligence, Wisdom",a.skillsProf="Choose two from Arcana, History, Insight, Investigation, Medicine, and Religion")},a.setProficiency()}]),angular.module("myappApp").controller("ProfCtrl",["$scope","$cookies","$mdDialog","$log",function(a,b,c,d){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"];var e=b["class"],f=b.level;a.isHidden=!1,a.isMessage=!0,a.isWarning=!0,a.levelMsg="",a.isDisabled=!1,a.bonusDisabled=!1,a.equipmentDisabled=!1,f>=1?(d.debug(f),a.levelMsg="Level "+f,a.detectClass=[{msg1:"Displaying proficiency bonus for ",bold:a.levelMsg+"."}]):(d.debug("level not set"),a.warningMessage=[{msg1:"Level not set. Set level in ",bold:"Character Details",msg2:" to show Proficiency Bonus."}],a.levelMsg="",a.bonusDisabled=!0,"Cleric"!==e&&"Fighter"!==e&&"Rogue"!==e&&"Wizard"!==e&&(a.warningMessage=[{msg1:"Level/Class not set. Set level/class in ",bold:"Character Details",msg2:" to show Proficiency info."}])),f>=1&&4>=f&&(a.profBonus=2),f>=5&&8>=f&&(a.profBonus=3),f>=9&&12>=f&&(a.profBonus=4),f>=12&&16>=f&&(a.profBonus=5),f>=17&&(a.profBonus=6),b.profBonus=a.profBonus,"Cleric"!==e&&"Fighter"!==e&&"Rogue"!==e&&"Wizard"!==e?(d.debug(e),a.warningMessage=[{msg1:"Class not set. Set class in ",bold:"Character Details",msg2:" to show Proficiency info."}],a.equipmentDisabled=!0):a.detectClass=[{msg1:"Displaying proficiency for ",bold:a.levelMsg+" "+e+"."}],"Cleric"===e&&(a.armorProf="Light and medium armor, shields",a.weapProf="All simple weapons",a.toolProf="None",a.savingThrows="Wisdom, Charisma",a.skillsProf="Choose two from History, Insight, Medicine, Persuasion, and Religion"),"Fighter"===e&&(a.armorProf="All armor, shields",a.weapProf="Simple weapons, martial weapons",a.toolProf="None.",a.savingThrows="Strength, Constitution",a.skillsProf="Choose two from Acrobatics, Animal Handling, Athletics, History, Insight, Intimidation, Perception, and Survival"),"Rogue"===e&&(a.armorProf="Light Armor",a.weapProf="Simple weapons, hand crossbows, longswords, rapiers, shortswords",a.toolProf="Thieves tools",a.savingThrows="Dexterity, Intelligence",a.skillsProf="Choose four from Acrobatics, Athletics, Deception, Insight, Intimidation, Investigation, Perception, Performance, Persuasion, Sleight of Hand, and Stealth"),"Wizard"===e&&(a.armorProf="None",a.weapProf="Daggers, darts, slings, quarterstaffs, light crossbows.",a.toolProf="None",a.savingThrows="Intelligence, Wisdom",a.skillsProf="Choose two from Arcana, History, Insight, Investigation, Medicine, and Religion"),a.alert="",a.showAlert=function(a){c.show(c.alert().title("Proficiency Info").content("Your proficiency bonus is calculated based on your level. Your class determines the type of weapons, armor, tools, etc. that your character is able to use.").ariaLabel("Ability Score Info").ok("Close").targetEvent(a))}}]),angular.module("myappApp").controller("AScoreCtrl",["$scope","$cookies","$log","$mdDialog",function(a,b,c,d){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"];var e=b.race,f=b.subrace,g=b.str,h=b.dex,i=b.con,j=b["int"],k=b.wis,l=b.cha;a.isHidden=!1,a.isMessage=!1,a.isWarning=!1,a.characterDetails=[{race:e,subrace:f}],a.abilityScores=[{str:g,dex:h,con:i,"int":j,wis:k,cha:l}],a.getRace=function(){("Select a Race"===e||"undefined"==typeof e)&&(c.debug("no race selected"),a.detectRace=[{msg:"No Race or Subrace selected. Select a Race and Subrace to display score bonuses.",bns:""}],a.isMessage=!1,a.isWarning=!0),("Select a Subrace"===f||"None Available"===f||"undefined"==typeof f)&&c.debug("no subrace selected"),"Select a Subrace"===f||"None Available"===f&&"Human"!==e||"undefined"==typeof f?(c.debug("no subrace selected"),a.detectRace=[{msg:"No Subrace selected. Select a Race and Subrace to display score bonuses.",bns:""}],a.isMessage=!1,a.isWarning=!0):("Dwarf"===e&&("Hill Dwarf"===f&&(a.detectSubrace=[{msg:"Hill Dwarf Race Bonus: ",bns:"+2con, +1 Wis"}]),"Mountain Dwarf"===f&&(a.detectSubrace=[{msg:"Mountain Dwarf Race Bonus: ",bns:"+2con, +2 Str"}]),a.isMessage=!0,a.isWarning=!1),"Elf"===e&&("Wood Elf"===f&&(a.detectSubrace=[{msg:"Wood Elf Race Bonus: ",bns:"+2 Dex, +1 Wis"}]),"High Elf"===f&&(a.detectSubrace=[{msg:"High Elf Race Bonus: ",bns:"+2 Dex, +1 Int"}]),a.isMessage=!0,a.isWarning=!1),"Halfling"===e&&("Lightfoot"===f&&(a.detectSubrace=[{msg:"Lightfoot Race Bonus: ",bns:"+2 Dex, +1 Cha"}]),"Stout"===f&&(a.detectSubrace=[{msg:"Stout Race Bonus: ",bns:"+2 Dex, +1 Con"}]),a.isMessage=!0,a.isWarning=!1),"Human"===e&&(a.detectSubrace=[{msg:"Human Race Bonus: ",bns:"+1 to all stats"}],a.isMessage=!0,a.isWarning=!1))},a.abilityScores.str=parseFloat(g),a.abilityScores.dex=parseFloat(h),a.abilityScores.con=parseFloat(i),a.abilityScores["int"]=parseFloat(j),a.abilityScores.wis=parseFloat(k),a.abilityScores.cha=parseFloat(l),a.setModifier=function(a){return null===a?null:1>=a?-5:a>=2&&3>=a?-4:a>=4&&5>=a?-3:a>=6&&7>=a?-2:a>=8&&9>=a?-1:a>=10&&11>=a?0:a>=12&&13>=a?1:a>=14&&15>=a?2:a>=16&&17>=a?3:a>=18&&19>=a?4:a>=20&&21>=a?5:a>=22&&23>=a?6:a>=24&&25>=a?7:a>=26&&27>=a?8:a>=28&&29>=a?9:a>=30?10:void 0},a.setStr=function(){a.strMod=a.setModifier(this.abilityScores.str),b.strMod=a.setModifier(this.abilityScores.str),b.str=a.abilityScores.str},a.setDex=function(){a.dexMod=a.setModifier(this.abilityScores.dex),b.dexMod=a.setModifier(this.abilityScores.dex),b.dex=a.abilityScores.dex},a.setCon=function(){a.conMod=a.setModifier(this.abilityScores.con),b.conMod=a.setModifier(this.abilityScores.con),b.con=a.abilityScores.con},a.setInt=function(){a.intMod=a.setModifier(this.abilityScores["int"]),b.intMod=a.setModifier(this.abilityScores["int"]),b["int"]=a.abilityScores["int"]},a.setWis=function(){a.wisMod=a.setModifier(this.abilityScores.wis),b.wisMod=a.setModifier(this.abilityScores.wis),b.wis=a.abilityScores.wis},a.setCha=function(){a.chaMod=a.setModifier(this.abilityScores.cha),b.chaMod=a.setModifier(this.abilityScores.cha),b.cha=a.abilityScores.cha},a.alert="",a.showAlert=function(a){d.show(d.alert().title("Ability Score Info").content("Ability scores determine your characters power in 6 categories (str, dex, con, int, wis, cha) and can range from 0-30. The score determines the modifier, which can be added to your skills and dice rolls.").ariaLabel("Ability Score Info").ok("Close").targetEvent(a))}}]),angular.module("myappApp").controller("SummaryCtrl",["$scope","$cookies","$log",function(a,b,c){var d=b.level,e=b.race,f=b["class"],g=0,h=0;a.detailsArray=[b.charName,b.level,b.race,b["class"]],a.modArray=[b.strMod,b.dexMod,b.conMod,b.intMod,b.wisMod,b.chaMod];var i=0,j=0;for(a.isHidden=!1,a.isModMsgHidden=!1,a.levelMsg="",a.raceMsg="",a.classMsg="",a.basicMessage=[{msg:"Some character details appear to be missing. Tap to correct."}],a.abilityScoreMessage=[{msg:"Ability scores missing. Tap to correct."}],("undefined"==typeof a.detailsArray[0]||""===a.detailsArray[0])&&(a.detailsArray[0]="Unknown Name"),a.levelMsg="undefined"==typeof d||"NaN"===d?"":"Level "+d,a.raceMsg="undefined"==typeof e||"Select a Race"===e?"":e,a.classMsg="undefined"==typeof f||"Select a Class"===f?"":f,h=0;h<a.detailsArray.length;h++)c.debug(a.detailsArray[h]),"undefined"==typeof a.detailsArray[h]||"Unknown Name"===a.detailsArray[h]||"NaN"===a.detailsArray[h]||"Select a Class"===a.detailsArray[h]||"Select a Race"===a.detailsArray[h]?(a.isHidden=!1,i++):0===i&&(a.isHidden=!0);for(g=0;g<a.modArray.length;g++)"undefined"==typeof a.modArray[g]||"undefined"===a.modArray[g]||"null"===a.modArray[g]?(a.isModMsgHidden=!1,j++,a.modArray[g]="-"):0===j&&(a.isModMsgHidden=!0);a.charSummary=[{name:a.detailsArray[0],level:a.levelMsg,race:a.raceMsg,"class":a.classMsg,strMod:a.modArray[0],dexMod:a.modArray[1],conMod:a.modArray[2],intMod:a.modArray[3],wisMod:a.modArray[4],chaMod:a.modArray[5]}]}]),angular.module("myappApp").controller("PartyCtrl",["$scope","$log","$location","$rootScope","$window","$document",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"],a.testFunction=function(){console.log("TEST FUNCTION")},a.init=function(){a.realtimeOpen=!0,startRealtime()}}]);var rtclient=rtclient||{};rtclient.INSTALL_SCOPE="https://www.googleapis.com/auth/drive.install",rtclient.FILE_SCOPE="https://www.googleapis.com/auth/drive.file",rtclient.OPENID_SCOPE="openid",rtclient.REALTIME_MIMETYPE="application/vnd.google-apps.drive-sdk",rtclient.getParams=function(){var a={},b=window.location.hash;if(b)for(var c=b.slice(1).split("&"),d=0;d<c.length;d++){var e=c[d].split("=");a[e[0]]=unescape(e[1])}return a},rtclient.params=rtclient.getParams(),rtclient.getOption=function(a,b,c){var d=void 0==a[b]?c:a[b];return void 0==d&&console.error(b+" should be present in the options."),d},rtclient.Authorizer=function(a){this.clientId=rtclient.getOption(a,"clientId"),this.userId=rtclient.params.userId,this.authButton=document.getElementById(rtclient.getOption(a,"authButtonElementId"))},rtclient.Authorizer.prototype.start=function(a){var b=this;gapi.load("auth:client,drive-realtime,drive-share",function(){b.authorize(a)})},rtclient.Authorizer.prototype.authorize=function(a){var b=this.clientId,c=this.userId,d=this,e=function(b){b&&!b.error?(d.authButton.disabled=!0,d.authButton.style.display="none",d.fetchUserId(a)):(d.authButton.disabled=!1,d.authButton.style.display="block",d.authButton.onclick=f)},f=function(){gapi.auth.authorize({client_id:b,scope:[rtclient.INSTALL_SCOPE,rtclient.FILE_SCOPE,rtclient.OPENID_SCOPE],user_id:c,immediate:!1},e)};gapi.auth.authorize({client_id:b,scope:[rtclient.INSTALL_SCOPE,rtclient.FILE_SCOPE,rtclient.OPENID_SCOPE],user_id:c,immediate:!0},e)},rtclient.Authorizer.prototype.fetchUserId=function(a){var b=this;gapi.client.load("oauth2","v2",function(){gapi.client.oauth2.userinfo.get().execute(function(c){c.id&&(b.userId=c.id),a&&a()})})},rtclient.createRealtimeFile=function(a,b,c){gapi.client.load("drive","v2",function(){gapi.client.drive.files.insert({resource:{mimeType:b,title:a}}).execute(c)})},rtclient.getFileMetadata=function(a,b){gapi.client.load("drive","v2",function(){gapi.client.drive.files.get({fileId:a}).execute(b)})},rtclient.retrieveAllFiles=function(a){gapi.client.load("drive","v2",function(){var b=function(c,d){c.execute(function(e){d=d.concat(e.items);var f=e.nextPageToken;f?(c=gapi.client.drive.files.list({"max-results":3,pageToken:f,q:"title = 'Dupe test 1'"}),b(c,d)):a(d)})},c=gapi.client.drive.files.list();b(c,[])})},rtclient.testFunction=function(a){0==a.length?console.log("no file exists"):(console.log(a),console.log("file exists!"),rtclient.downloadFile(a[0],rtclient.testFunction2))},rtclient.testFunction2=function(){return"SILLY"},rtclient.parseState=function(a){try{var b=JSON.parse(a);return b}catch(c){return null}};var RTCLIENT;rtclient.RealtimeLoader=function(a){this.onFileLoaded=rtclient.getOption(a,"onFileLoaded"),this.newFileMimeType=rtclient.getOption(a,"newFileMimeType",rtclient.REALTIME_MIMETYPE),this.initializeModel=rtclient.getOption(a,"initializeModel"),this.registerTypes=rtclient.getOption(a,"registerTypes",function(){}),this.afterAuth=rtclient.getOption(a,"afterAuth",function(){}),this.autoCreate=rtclient.getOption(a,"autoCreate",!1),this.defaultTitle=rtclient.getOption(a,"defaultTitle","New Realtime File"),this.authorizer=new rtclient.Authorizer(a),RTCLIENT=this},rtclient.RealtimeLoader.prototype.redirectTo=function(a,b){var c=[];a&&c.push("fileIds="+a.join(",")),b&&c.push("userId="+b);var d=0==c.length?"./":"./#/party/&"+c.join("&");window.history&&window.history.replaceState?window.history.replaceState("Google Drive Realtime API Playground","Google Drive Realtime API Playground",d):window.location.href=d,rtclient.params=rtclient.getParams();for(var e in a)gapi.drive.realtime.load(a[e],this.onFileLoaded,this.initializeModel,this.handleErrors)},rtclient.RealtimeLoader.prototype.start=function(){var a=this;this.authorizer.start(function(){a.registerTypes&&a.registerTypes(),a.afterAuth&&a.afterAuth(),a.load()})},rtclient.RealtimeLoader.prototype.handleErrors=function(a){console.log(a),"not_found"==a.type&&RTCLIENT.createNewFileAndRedirect(),a.type==gapi.drive.realtime.ErrorType.TOKEN_REFRESH_REQUIRED?authorizer.authorize():a.type==gapi.drive.realtime.ErrorType.CLIENT_ERROR?(alert("An Error happened: "+a.message),window.location.href="/"):a.type==gapi.drive.realtime.ErrorType.NOT_FOUND?RTCLIENT.createNewFileAndRedirect():a.type==gapi.drive.realtime.ErrorType.FORBIDDEN&&(console.log("NO WRITE PERMISSIONS"),notes.disabled=!0)},rtclient.RealtimeLoader.prototype.load=function(){var a=rtclient.params.fileIds;a&&(a=a.split(","));var b=this.authorizer.userId,c=rtclient.params.state,d=(this.authorizer,parseQuery(window.location.href));d.fileIds&&(console.log("THERE IS A FILE ID!"),localStorage.setItem("rtFileId",d.fileIds));var e=localStorage.getItem("rtFileId");if(console.log(e),e)a=[e],console.log(a),rtclient.retrievePermissions(a);else{var d=parseQuery(window.location.href);d.fileIds&&(console.log("THERE IS A FILE ID!"),rtclient.retrievePermissions(a))}if(a){for(var f in a)gapi.drive.realtime.load(a[f],this.onFileLoaded,this.initializeModel,this.handleErrors);return void this.redirectTo(a,b)}if(c){var g=rtclient.parseState(c);if("open"==g.action)return a=g.ids,b=g.userId,void this.redirectTo(a,b)}this.autoCreate&&this.createNewFileAndRedirect()},rtclient.RealtimeLoader.prototype.createNewFileAndRedirect=function(){var a=this;rtclient.createRealtimeFile(this.defaultTitle,this.newFileMimeType,function(b){b.id?(localStorage.setItem("rtFileId",b.id),rtclient.changePermissions(b.id,null,"anyone","reader"),a.redirectTo([b.id],a.authorizer.userId)):(console.error("Error creating file."),console.error(b))})},rtclient.downloadFile=function(a,b){gapi.client.load("drive","v2",function(){if(console.log(a.selfLink),a.selfLink){var c=gapi.auth.getToken().access_token,d=new XMLHttpRequest;d.open("GET",a.selfLink),d.setRequestHeader("Authorization","Bearer "+c),d.onload=function(){console.log(d.responseText),b(d.responseText)},d.onerror=function(){b(null)},d.send()}else b(null);rtclient.RealtimeLoader()})},rtclient.changePermissions=function(a,b,c,d){gapi.client.load("drive","v2",function(){var e={value:b,type:c,role:d},f=gapi.client.drive.permissions.insert({fileId:a,resource:e});f.execute(function(){rtclient.retrievePermissions(a)})});document.getElementById("enableShare"),document.getElementById("disableShare")},rtclient.retrievePermissions=function(a){gapi.client.load("drive","v2",function(){var b=gapi.client.drive.permissions.list({fileId:a});b.execute(function(a){console.log("HELLO");var b=a.items[0].id;if(console.log(a),a.items[1]){var c=a.items[1].role;document.getElementById("enableShare"),document.getElementById("disableShare"),document.getElementById("notes"),rtclient.printAbout(b,c)}})})},rtclient.printAbout=function(a,b){gapi.client.load("drive","v2",function(){var c=gapi.client.drive.about.get();c.execute(function(c){var d=document.getElementById("shareControls"),e=c.user.permissionId;if(e==a){d.style.display="block",notes.disabled=!1,"writer"==b?(console.log("this doc is open for anyone to write"),enableShare.style.display="none",disableShare.style.display="inline-block"):"reader"==b&&(enableShare.style.display="inline-block",disableShare.style.display="none");var f="AIzaSyCde-rPHpjfEEqmR93btsjT8fh6onckLow",g=window.location.href,h={longUrl:g};gapi.client.load("urlshortener","v1").then(rtclient.urlShortener("https://www.googleapis.com/urlshortener/v1/url?key="+f,h))}else d.style.display="none"})})},rtclient.urlShortener=function(a,b){var c=document.getElementById("shortURL"),d=null,e=JSON.stringify(b);d=new XMLHttpRequest,d.open("POST",a,!0),d.setRequestHeader("Content-type","application/json"),d.send(e),d.onreadystatechange=function(){if(d.responseText){var a=JSON.parse(d.responseText);console.log(a.id),c.innerHTML=a.id}}};var realtimeOptions={clientId:"516279059329-ucgvf9nubkm942qoc0iqgo838f3mfv6a.apps.googleusercontent.com",authButtonElementId:"authorizeButton",initializeModel:initializeModel,autoCreate:!0,defaultTitle:"Scollbinder Party",newFileMimeType:null,onFileLoaded:onFileLoaded,registerTypes:null,afterAuth:null};
!function(){angular.module("angular-storage",["angular-storage.store"]),angular.module("angular-storage.internalStore",["angular-storage.storage"]).factory("InternalStore",["storage","$log",function(a,b){function c(a,b){this.namespace=a||null,this.delimiter=b||".",this.inMemoryCache={}}return c.prototype.getNamespacedKey=function(a){return this.namespace?[this.namespace,a].join(this.delimiter):a},c.prototype.set=function(b,c){this.inMemoryCache[b]=c,a.set(this.getNamespacedKey(b),JSON.stringify(c))},c.prototype.get=function(c){var d=null;if(c in this.inMemoryCache)return this.inMemoryCache[c];var e=a.get(this.getNamespacedKey(c));try{d="undefined"==typeof e||"undefined"===e?void 0:JSON.parse(e),this.inMemoryCache[c]=d}catch(f){b.error("Error parsing saved value",f),this.remove(c)}return d},c.prototype.remove=function(b){this.inMemoryCache[b]=null,a.remove(this.getNamespacedKey(b))},c}]),angular.module("angular-storage.storage",[]).service("storage",["$window","$injector",function(a,b){if(a.localStorage)this.set=function(b,c){return a.localStorage.setItem(b,c)},this.get=function(b){return a.localStorage.getItem(b)},this.remove=function(b){return a.localStorage.removeItem(b)};else{var c=b.get("$cookieStore");this.set=function(a,b){return c.put(a,b)},this.get=function(a){return c.get(a)},this.remove=function(a){return c.remove(a)}}}]),angular.module("angular-storage.store",["angular-storage.internalStore"]).factory("store",["InternalStore",function(a){var b=new a;return b.getNamespacedStore=function(b,c){return new a(b,c)},b}])}();var realtimeOptions={clientId:"516279059329-ucgvf9nubkm942qoc0iqgo838f3mfv6a.apps.googleusercontent.com",authButtonElementId:"authorizeButton",initializeModel:initializeModel,autoCreate:!0,defaultTitle:"Realtime API Tic Tac Toe Example",newFileMimeType:null,onFileLoaded:onFileLoaded,registerTypes:null,afterAuth:null};window.onload=function(){var a=new rtclient.RealtimeLoader(realtimeOptions);a.start()};